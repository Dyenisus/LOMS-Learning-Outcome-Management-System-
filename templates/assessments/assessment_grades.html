{% extends "base.html" %}

{% block content %}
<h2>Grades for {{ assessment.name }}</h2>

<p>
    Course: {{ course.code }} - {{ course.name }}<br>
    Program: {{ course.program.code }} - {{ course.program.name }}<br>
    {% if assessment.max_score %}
        Max Score: {{ assessment.max_score }}
    {% endif %}
</p>

{% if rows %}
    <form method="post">
        {% csrf_token %}
        <table border="1" cellpadding="4">
            <tr>
                <th>Student</th>
                <th>Username</th>
                <th>Score</th>
            </tr>
            {% for row in rows %}
                <tr>
                    <td>{{ row.student.first_name }} {{ row.student.last_name }}</td>
                    <td>{{ row.student.username }}</td>
                    <td>
                        <input
                            type="number"
                            step="0.01"
                            name="score_{{ row.student.id }}"
                            value="{{ row.raw_score }}"
                            min="0"
                            {% if assessment.max_score %}max="{{ assessment.max_score }}"{% endif %}
                        >
                    </td>
                </tr>
            {% endfor %}
        </table>

        <p>
            <button type="submit">Save Grades</button>
            <a href="{% url 'assessments:assessment_manage' course.id %}">
                Back to Assessment List
            </a>
        </p>
    </form>
{% else %}
    <p><em>Bu course için section’a atanmış öğrenci bulunamadı.</em></p>
    <p>
        <a href="{% url 'courses:section_manage' course.id %}">
            Manage Sections
        </a>
    </p>
{% endif %}

{% endblock %}
