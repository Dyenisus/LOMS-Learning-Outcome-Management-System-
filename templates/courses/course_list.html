{% extends "base.html" %}

{% block content %}
<h2>Course List</h2>

{% if selected_program %}
    <p>
        Program:
        <strong>{{ selected_program.code }} - {{ selected_program.name }}</strong>
    </p>
{% endif %}

<p>
    <a href="{% url 'courses:course_create' %}{% if selected_program %}?program={{ selected_program.id }}{% endif %}">
        Add New Course
    </a>
</p>

<ul>
    {% for c in courses %}
        <li>
            <strong>{{ c.code }} - {{ c.name }}</strong>
            (Program: {{ c.program.code }})

            {% if c.year %}
                | Year: {{ c.get_year_display }}
            {% endif %}

            | Semester: {{ c.get_semester_display }}

            {% if c.ects %}
                | ECTS: {{ c.ects }}
            {% endif %}

            {% if c.credit %}
                | Credit: {{ c.credit }}
            {% endif %}

			{% if c.lecturer %}
                | Lecturer: {{ c.lecturer.username }}
            {% endif %}

            | Students enrolled: {{ c.students.count }}

            | <a href="{% url 'courses:course_edit' c.id %}">Edit</a>
			| <a href="{% url 'courses:course_delete' c.id %}">Delete</a>
        </li>
    {% empty %}
        <li>No courses found.</li>
    {% endfor %}
</ul>
{% endblock %}
